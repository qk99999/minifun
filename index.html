<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7FVB8NG111"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-7FVB8NG111');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiNiFun - Play Free Online Games | 小游戏聚合站</title>
    <meta name="description" content="MiNiFun is your go-to platform for free online games. Browse our collection of action, puzzle, strategy, and adventure games to play right in your browser.">
    <link rel="canonical" href="https://minifun.vip/" />
    <meta name="keywords" content="MiNiFun, online games, free games, browser games, action games, puzzle games, strategy games">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        apple: {
                            blue: '#007AFF',
                            green: '#34C759',
                            red: '#FF3B30',
                            orange: '#FF9500',
                            yellow: '#FFCC00',
                            purple: '#AF52DE',
                            pink: '#FF2D55',
                            gray: '#8E8E93'
                        }
                    }
                }
            }
        }
    </script>
    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .game-card {
            transition: transform 0.3s ease;
        }
        .game-card:hover {
            transform: translateY(-5px);
        }
        .game-container {
            aspect-ratio: 16/9;
            max-height: 70vh;
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            .mobile-menu {
                display: block;
            }
        }
        @media (min-width: 769px) {
            .sidebar {
                display: block;
            }
            .mobile-menu {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <header class="bg-gradient-to-r from-apple-blue to-apple-purple text-white shadow-md">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center">
                    <div class="text-2xl font-bold mr-4">
                        <a href="#" id="logo-link">MiNiFun</a>
                    </div>
                    <div class="mobile-menu md:hidden">
                        <button class="text-white text-xl">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
                <div class="hidden md:flex space-x-4">
                    <a href="#" class="text-white hover:text-gray-200" data-i18n="nav.home">Home</a>
                    <a href="#" class="text-white hover:text-gray-200" data-i18n="nav.popular">Popular</a>
                    <a href="#" class="text-white hover:text-gray-200" data-i18n="nav.new_games">New Games</a>
                    <a href="#" class="text-white hover:text-gray-200" data-i18n="nav.contact">Contact</a>
                    <div class="relative group">
                        <button class="text-white hover:text-gray-200 flex items-center" id="language-selector">
                            <span id="current-language">English</span>
                            <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </button>
                        <div class="absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg overflow-hidden z-20 hidden group-hover:block">
                            <div class="py-1">
                                <a href="#" class="language-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="en">English</a>
                                <a href="#" class="language-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="zh">中文</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="md:hidden">
                    <button class="text-white" id="mobile-language-btn">
                        <i class="fas fa-globe"></i>
                    </button>
                    <div id="mobile-language-menu" class="hidden absolute right-4 mt-2 w-32 bg-white rounded-md shadow-lg overflow-hidden z-20">
                        <div class="py-1">
                            <a href="#" class="language-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="en">English</a>
                            <a href="#" class="language-option block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="zh">中文</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="max-w-2xl mx-auto mb-8">
                <div class="relative flex items-center">
                    <input type="text" 
                           id="search-input"
                           placeholder="Search games..." 
                           class="w-full px-5 py-3 rounded-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-apple-blue">
                    <button class="absolute right-3 text-gray-500" id="search-button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            
            <h1 class="text-3xl md:text-5xl font-bold text-center mb-4" data-i18n="header.title">MiNiFun Games</h1>
            <p class="text-center text-xl max-w-3xl mx-auto" data-i18n="header.subtitle">Your ultimate destination for free online games!</p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 flex flex-wrap">
        <!-- Sidebar Categories -->
        <aside class="sidebar w-full md:w-64 pr-8">
            <div class="bg-white rounded-xl shadow-md p-4 mb-6">
                <h2 class="text-xl font-bold mb-4 text-apple-blue" data-i18n="sidebar.categories">Game Categories</h2>
                <ul class="space-y-2" id="categories-list">
                    <!-- Categories will be loaded dynamically -->
                </ul>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-4 mb-6">
                <h2 class="text-xl font-bold mb-4 text-apple-blue" data-i18n="sidebar.themes">Game Themes</h2>
                <ul class="space-y-2" id="themes-list">
                    <!-- Themes will be loaded dynamically -->
                </ul>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="w-full md:flex-1">
            <!-- All Games Section -->
            <section class="mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-apple-blue" data-i18n="main.all_games">所有游戏</h2>
                    <div class="flex space-x-2">
                        <button id="grid-view-btn" class="bg-apple-blue text-white px-3 py-1 rounded text-sm">
                            <i class="fas fa-th"></i>
                        </button>
                        <button id="list-view-btn" class="bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="all-games">
                    <!-- All games will be loaded dynamically -->
                </div>
            </section>
            
            <!-- Game Categories Grid -->
            <section class="mb-12">
                <h2 class="text-2xl font-bold mb-6 text-apple-blue" data-i18n="main.categories">游戏分类</h2>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-3" id="category-cards">
                    <!-- Category cards will be loaded dynamically -->
                </div>
            </section>
            
            <!-- Popular Games Section -->
            <section class="mb-8">
                <h2 class="text-2xl font-bold mb-6 text-apple-blue" data-i18n="main.popular">热门游戏</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="popular-games">
                    <!-- Popular games will be loaded dynamically -->
                </div>
            </section>
            
            <!-- New Games Section -->
            <section class="mb-8">
                <h2 class="text-2xl font-bold mb-6 text-apple-blue" data-i18n="main.new">新游戏</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="new-games">
                    <!-- New games will be loaded dynamically -->
                </div>
            </section>
        </main>
    </div>

    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-4 py-8">
            <div class="flex flex-wrap justify-between">
                <div class="w-full md:w-1/3 mb-6 md:mb-0">
                    <h2 class="text-xl font-bold mb-4" data-i18n="footer.title">MiNiFun</h2>
                    <p class="text-gray-400 mb-4" data-i18n="footer.description">Your ultimate destination for free online games. Play instantly in your browser without downloads.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-discord"></i></a>
                    </div>
                </div>
                
                <div class="w-full md:w-1/3 mb-6 md:mb-0">
                    <h3 class="text-lg font-semibold mb-4" data-i18n="footer.quick_links">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="nav.home">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="footer.top_games">Top Games</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="footer.new_releases">New Releases</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="nav.contact">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="w-full md:w-1/3">
                    <h3 class="text-lg font-semibold mb-4" data-i18n="footer.legal">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="footer.terms">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="footer.privacy">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" data-i18n="footer.cookies">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-6 text-center">
                <p class="text-gray-400" data-i18n="footer.copyright">&copy; 2024 MiNiFun.vip. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- App JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.querySelector('.mobile-menu button');
            const sidebar = document.querySelector('.sidebar');
            
            mobileMenuButton.addEventListener('click', function() {
                if (sidebar.style.display === 'block') {
                    sidebar.style.display = 'none';
                } else {
                    sidebar.style.display = 'block';
                }
            });
            
            // Initialize language support
            initLanguage();
            
            // Load game data from JSON
            loadGameData();
        });
        
        // Function to fetch and load game data
        async function loadGameData() {
            try {
                const response = await fetch('games.json');
                if (!response.ok) {
                    throw new Error('Failed to load game data');
                }
                
                const data = await response.json();
                
                // Load categories
                loadCategories(data.categories);
                
                // Load themes
                loadThemes(data.themes);
                
                // Load all active games
                const activeGames = data.games.filter(game => game.isActive);
                loadGames(activeGames, 'all-games');
                
                // Setup view toggle for all games
                setupViewToggle();
                
                // Load popular games (games with isHot=true)
                const popularGames = activeGames.filter(game => game.isHot);
                loadGames(popularGames, 'popular-games');
                
                // Load new games (games with isNew=true)
                const newGames = activeGames.filter(game => game.isNew);
                loadGames(newGames, 'new-games');
                
                // Load category cards
                loadCategoryCards(data.categories);
                
                // Set up search functionality
                setupSearch(activeGames);
                
            } catch (error) {
                console.error('Error loading game data:', error);
                document.getElementById('all-games').innerHTML = '<p class="text-red-500 p-4">加载游戏数据失败，请稍后再试。</p>';
            }
        }
        
        // Function to load categories
        function loadCategories(categories) {
            const categoriesList = document.getElementById('categories-list');
            categoriesList.innerHTML = '';
            
            categories.forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="#" class="flex items-center text-gray-700 hover:text-apple-blue" data-category="${category.id}">
                        <i class="${category.icon} mr-2"></i> ${category.name}
                    </a>
                `;
                categoriesList.appendChild(li);
                
                // Add event listener for category filtering
                li.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    filterGamesByCategory(category.id);
                });
            });
        }
        
        // Function to load themes
        function loadThemes(themes) {
            const themesList = document.getElementById('themes-list');
            themesList.innerHTML = '';
            
            themes.forEach(theme => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="#" class="flex items-center text-gray-700 hover:text-apple-blue" data-theme="${theme.id}">
                        <i class="${theme.icon} mr-2"></i> ${theme.name}
                    </a>
                `;
                themesList.appendChild(li);
                
                // Add event listener for theme filtering (would need theme data in games)
                // This is just a placeholder - would need to update the JSON structure to include theme info for games
                li.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    alert('Theme filtering coming soon!');
                });
            });
        }
        
        // Function to load category cards
        function loadCategoryCards(categories) {
            const container = document.getElementById('category-cards');
            container.innerHTML = '';
            
            categories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow';
                
                // Generate random color from apple color palette for each category
                const colors = ['apple-blue', 'apple-green', 'apple-red', 'apple-orange', 'apple-yellow', 'apple-purple', 'apple-pink'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                
                card.innerHTML = `
                    <a href="#" class="block" data-category="${category.id}">
                        <div class="bg-${randomColor} text-white p-3 flex justify-center items-center">
                            <i class="${category.icon} text-2xl"></i>
                        </div>
                        <div class="p-2 text-center">
                            <h3 class="font-medium text-sm">${category.name}</h3>
                        </div>
                    </a>
                `;
                
                container.appendChild(card);
                
                // Add event listener for category filtering
                card.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    filterGamesByCategory(category.id);
                });
            });
        }
        
        // Function to load games into a container
        function loadGames(games, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (games.length === 0) {
                container.innerHTML = '<p class="col-span-full text-center text-gray-500">该分类下暂无游戏。</p>';
                return;
            }
            
            games.forEach(game => {
                const gameCard = createGameCard(game);
                container.appendChild(gameCard);
            });
        }
        
        // Function to create a game card
        function createGameCard(game) {
            const gameCard = document.createElement('div');
            gameCard.className = 'game-card bg-white rounded-lg shadow-sm hover:shadow-md overflow-hidden';
            gameCard.setAttribute('data-category', game.category);
            gameCard.setAttribute('data-game-id', game.id);
            
            let badgeHTML = '';
            if (game.isHot) {
                badgeHTML = `<div class="absolute top-2 right-2 bg-apple-red text-white text-xs font-bold px-2 py-0.5 rounded">${translations[currentLang].game.hot}</div>`;
            } else if (game.isNew) {
                badgeHTML = `<div class="absolute top-2 right-2 bg-apple-green text-white text-xs font-bold px-2 py-0.5 rounded">${translations[currentLang].game.new}</div>`;
            }
            
            // Find the category icon from the game.category
            let categoryName = translations[currentLang].game.unknown;
            let categoryIcon = 'fas fa-gamepad';
            
            // This would typically come from your categories data
            // For simplicity, we're hard-coding some mappings here
            const categoryMap = {
                'action': { icon: 'fas fa-gamepad' },
                'shooting': { icon: 'fas fa-crosshairs' },
                'puzzle': { icon: 'fas fa-puzzle-piece' },
                'strategy': { icon: 'fas fa-chess' },
                'adventure': { icon: 'fas fa-running' },
                'racing': { icon: 'fas fa-car' },
                'sports': { icon: 'fas fa-futbol' }
            };
            
            if (categoryMap[game.category]) {
                categoryName = translations[currentLang].categories[game.category] || translations[currentLang].game.unknown;
                categoryIcon = categoryMap[game.category].icon;
            }
            
            gameCard.innerHTML = `
                <div class="relative">
                    <img src="${game.imageUrl}" alt="${game.title}" class="w-full h-36 object-cover">
                    ${badgeHTML}
                </div>
                <div class="p-3">
                    <h3 class="font-bold text-sm mb-1 truncate">${game.title}</h3>
                    <p class="text-gray-600 text-xs mb-2 line-clamp-2 h-8">${game.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-500"><i class="${categoryIcon} mr-1"></i> ${categoryName}</span>
                        <a href="${game.detailPage}" class="bg-apple-blue text-white text-xs px-2 py-1 rounded hover:bg-blue-600">${translations[currentLang].game.play}</a>
                    </div>
                </div>
            `;
            
            return gameCard;
        }
        
        // Function to filter games by category
        async function filterGamesByCategory(categoryId) {
            try {
                const response = await fetch('games.json');
                if (!response.ok) {
                    throw new Error('Failed to load game data');
                }
                
                const data = await response.json();
                
                // Get active games matching the category
                const filteredGames = data.games.filter(game => game.isActive && game.category === categoryId);
                
                // Update all games section with filtered games
                document.getElementById('all-games').innerHTML = '';
                
                if (filteredGames.length === 0) {
                    document.getElementById('all-games').innerHTML = `<p class="col-span-full text-center text-gray-500">${translations[currentLang].search.no_games}</p>`;
                } else {
                    // Load all filtered games into the games section
                    loadGames(filteredGames, 'all-games');
                }
                
                // Hide other sections temporarily
                document.querySelector('section:nth-child(3)').style.display = 'none'; // Popular games
                document.querySelector('section:nth-child(4)').style.display = 'none'; // New games
                
                // Update section heading
                const category = data.categories.find(cat => cat.id === categoryId);
                const categoryName = category ? (currentLang === 'en' ? category.name : translations[currentLang].categories[categoryId]) : categoryId;
                document.querySelector('section:nth-child(1) h2').textContent = `${categoryName} ${translations[currentLang === 'en' ? 'en' : 'zh'].main.all_games}`;
                
            } catch (error) {
                console.error('Error filtering games:', error);
            }
        }
        
        // Function to set up search functionality
        function setupSearch(games) {
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            
            // Set search placeholder based on current language
            searchInput.placeholder = translations[currentLang].search.placeholder;
            
            function performSearch() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                if (searchTerm === '') return;
                
                const searchResults = games.filter(game => 
                    game.title.toLowerCase().includes(searchTerm) || 
                    game.description.toLowerCase().includes(searchTerm)
                );
                
                document.getElementById('all-games').innerHTML = '';
                
                if (searchResults.length === 0) {
                    const noResultsText = translations[currentLang].search.no_results.replace('%s', searchTerm);
                    document.getElementById('all-games').innerHTML = `<p class="col-span-full text-center text-gray-500">${noResultsText}</p>`;
                } else {
                    loadGames(searchResults, 'all-games');
                }
                
                // Hide other sections temporarily
                document.querySelector('section:nth-child(2)').style.display = 'none'; // Categories
                document.querySelector('section:nth-child(3)').style.display = 'none'; // Popular games
                document.querySelector('section:nth-child(4)').style.display = 'none'; // New games
                
                // Update section heading
                const resultsText = translations[currentLang].search.results.replace('%s', searchTerm);
                document.querySelector('section:nth-child(1) h2').textContent = resultsText;
            }
            
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }
        
        // Function to reset to default view
        function resetView() {
            loadGameData();
            
            // Reset section headings and display
            document.querySelector('section:nth-child(1) h2').textContent = translations[currentLang].main.all_games;
            document.querySelector('section:nth-child(2)').style.display = 'block';
            document.querySelector('section:nth-child(3)').style.display = 'block';
            document.querySelector('section:nth-child(4)').style.display = 'block';
        }
        
        // Function to setup view toggle (grid/list view)
        function setupViewToggle() {
            const gridViewBtn = document.getElementById('grid-view-btn');
            const listViewBtn = document.getElementById('list-view-btn');
            const allGamesContainer = document.getElementById('all-games');
            
            gridViewBtn.addEventListener('click', function() {
                allGamesContainer.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4';
                gridViewBtn.className = 'bg-apple-blue text-white px-3 py-1 rounded text-sm';
                listViewBtn.className = 'bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm';
            });
            
            listViewBtn.addEventListener('click', function() {
                allGamesContainer.className = 'grid grid-cols-1 gap-4';
                listViewBtn.className = 'bg-apple-blue text-white px-3 py-1 rounded text-sm';
                gridViewBtn.className = 'bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm';
            });
        }
        
        // Multi-language support
        const translations = {
            'en': {
                'nav': {
                    'home': 'Home',
                    'popular': 'Popular',
                    'new_games': 'New Games',
                    'contact': 'Contact'
                },
                'header': {
                    'title': 'MiNiFun Games',
                    'subtitle': 'Your ultimate destination for free online games!'
                },
                'sidebar': {
                    'categories': 'Game Categories',
                    'themes': 'Game Themes'
                },
                'main': {
                    'all_games': 'All Games',
                    'categories': 'Game Categories',
                    'popular': 'Popular Games',
                    'new': 'New Games'
                },
                'game': {
                    'hot': 'HOT',
                    'new': 'NEW',
                    'play': 'Play Now',
                    'unknown': 'Unknown'
                },
                'search': {
                    'placeholder': 'Search games...',
                    'no_results': 'No games found matching "%s"',
                    'results': 'Search Results for "%s"',
                    'no_games': 'No games available in this category.'
                },
                'categories': {
                    'action': 'Action',
                    'shooting': 'Shooting',
                    'puzzle': 'Puzzle',
                    'strategy': 'Strategy',
                    'adventure': 'Adventure',
                    'racing': 'Racing',
                    'sports': 'Sports'
                },
                'footer': {
                    'title': 'MiNiFun',
                    'description': 'Your ultimate destination for free online games. Play instantly in your browser without downloads.',
                    'quick_links': 'Quick Links',
                    'top_games': 'Top Games',
                    'new_releases': 'New Releases',
                    'legal': 'Legal',
                    'terms': 'Terms of Service',
                    'privacy': 'Privacy Policy',
                    'cookies': 'Cookie Policy',
                    'copyright': '© 2024 MiNiFun.vip. All rights reserved.'
                }
            },
            'zh': {
                'nav': {
                    'home': '首页',
                    'popular': '热门',
                    'new_games': '新游戏',
                    'contact': '联系我们'
                },
                'header': {
                    'title': 'MiNiFun 游戏',
                    'subtitle': '您的免费在线游戏终极目的地！'
                },
                'sidebar': {
                    'categories': '游戏分类',
                    'themes': '游戏主题'
                },
                'main': {
                    'all_games': '所有游戏',
                    'categories': '游戏分类',
                    'popular': '热门游戏',
                    'new': '新游戏'
                },
                'game': {
                    'hot': '热门',
                    'new': '新游戏',
                    'play': '开始玩',
                    'unknown': '未知'
                },
                'search': {
                    'placeholder': '搜索游戏...',
                    'no_results': '未找到匹配"%s"的游戏',
                    'results': '"%s"的搜索结果',
                    'no_games': '该分类下暂无游戏。'
                },
                'categories': {
                    'action': '动作',
                    'shooting': '射击',
                    'puzzle': '益智',
                    'strategy': '策略',
                    'adventure': '冒险',
                    'racing': '赛车',
                    'sports': '体育'
                },
                'footer': {
                    'title': 'MiNiFun',
                    'description': '您的免费在线游戏终极目的地。无需下载，直接在浏览器中游玩。',
                    'quick_links': '快速链接',
                    'top_games': '热门游戏',
                    'new_releases': '新发布',
                    'legal': '法律条款',
                    'terms': '服务条款',
                    'privacy': '隐私政策',
                    'cookies': 'Cookie政策',
                    'copyright': '© 2024 MiNiFun.vip. 保留所有权利。'
                }
            }
        };
        
        // Current language
        let currentLang = 'en';
        
        // Function to set language
        function setLanguage(lang) {
            if (!translations[lang]) return;
            
            currentLang = lang;
            
            // Update UI text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const keys = el.getAttribute('data-i18n').split('.');
                let text = translations[lang];
                
                // Navigate through the translation object
                for (const key of keys) {
                    if (text[key] !== undefined) {
                        text = text[key];
                    } else {
                        text = null;
                        break;
                    }
                }
                
                if (text) {
                    el.textContent = text;
                }
            });
            
            // Update search placeholder
            document.getElementById('search-input').placeholder = translations[lang].search.placeholder;
            
            // Update language display
            document.getElementById('current-language').textContent = lang === 'en' ? 'English' : '中文';
            
            // Store language preference
            localStorage.setItem('minifun-language', lang);
            
            // Update game cards (if they exist)
            const allGamesContainer = document.getElementById('all-games');
            if (allGamesContainer.children.length > 0 && !allGamesContainer.querySelector('p')) {
                // If games are loaded and not showing "no games" message
                updateGameCardLanguage();
            }
        }
        
        // Function to update game card language
        function updateGameCardLanguage() {
            document.querySelectorAll('.game-card').forEach(card => {
                const categoryId = card.getAttribute('data-category');
                
                // Update category name
                const categorySpan = card.querySelector('.text-gray-500');
                if (categorySpan) {
                    const categoryIcon = categorySpan.querySelector('i').outerHTML;
                    const categoryName = translations[currentLang].categories[categoryId] || translations[currentLang].game.unknown;
                    categorySpan.innerHTML = `${categoryIcon} ${categoryName}`;
                }
                
                // Update badge text
                const badge = card.querySelector('.absolute.top-2.right-2');
                if (badge) {
                    if (badge.classList.contains('bg-apple-red')) {
                        badge.textContent = translations[currentLang].game.hot;
                    } else if (badge.classList.contains('bg-apple-green')) {
                        badge.textContent = translations[currentLang].game.new;
                    }
                }
                
                // Update "Play Now" button
                const playButton = card.querySelector('a.bg-apple-blue');
                if (playButton) {
                    playButton.textContent = translations[currentLang].game.play;
                }
            });
        }
        
        // Function to initialize language settings
        function initLanguage() {
            // Check for saved language preference
            const savedLang = localStorage.getItem('minifun-language');
            if (savedLang && translations[savedLang]) {
                setLanguage(savedLang);
            } else {
                // Default to English
                setLanguage('en');
            }
            
            // Add event listeners for language switching
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    const lang = this.getAttribute('data-lang');
                    setLanguage(lang);
                });
            });
            
            // Mobile language menu toggle
            const mobileLangBtn = document.getElementById('mobile-language-btn');
            const mobileLangMenu = document.getElementById('mobile-language-menu');
            
            mobileLangBtn.addEventListener('click', function() {
                mobileLangMenu.classList.toggle('hidden');
            });
            
            // Close mobile language menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileLangBtn.contains(e.target) && !mobileLangMenu.contains(e.target)) {
                    mobileLangMenu.classList.add('hidden');
                }
            });
            
            // Add logo click event to reset view
            document.getElementById('logo-link').addEventListener('click', function(e) {
                e.preventDefault();
                resetView();
            });
        }
    </script>
</body>
</html> 
